<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qualitas.portal.fraudes.account.Infrastructure.dao.ResultadoConsultaDao">

    <!-- Inserta un nuevo resultado de consulta -->
    <insert id="crearResultadoConsulta" useGeneratedKeys="true" keyProperty="iResultCargaId">
        INSERT INTO T_RESULTADO_CONSULTA (
            V_NOMBRE,
            V_SEXO,
            I_CODIGO_POSTAL,
            D_FECHA_NACIMIENTO,
            I_AUTO_ID,
            I_MODELO_ID,
            I_AUTO_DESCRIPCION_ID,
            D_FECHA_CREACION,
            I_USUARIO_CREACION
        ) VALUES (
                     #{vNombre},
                     #{vSexo},
                     #{iCodigoPostal},
                     #{dFechaNacimiento},
                     #{iAutoId},
                     #{iModeloId},
                     #{iAutoDescripcionId},
                     #{dFechaCreacion},
                     #{iUsuarioCreacion}
                 )
    </insert>

    <!-- Selecciona un resultado de consulta por ID -->
    <select id="obtenerResultadoConsulta" resultMap="ResultadoConsultaResultado">
        SELECT
            I_RESULT_CARGA_ID,
            V_NOMBRE,
            V_SEXO,
            I_CODIGO_POSTAL,
            D_FECHA_NACIMIENTO,
            I_AUTO_ID,
            I_MODELO_ID,
            I_AUTO_DESCRIPCION_ID,
            D_FECHA_CREACION,
            I_USUARIO_CREACION
        FROM T_RESULTADO_CONSULTA
        WHERE I_RESULT_CARGA_ID = #{iResultCargaId}
    </select>

    <!-- ResultMap para mapear el resultado de la base de datos al modelo -->
    <resultMap id="ResultadoConsultaResultado" type="com.qualitas.portal.fraudes.account.domain.model.ResultadoConsulta">
        <id property="iResultCargaId" column="I_RESULT_CARGA_ID"/>
        <result property="vNombre" column="V_NOMBRE"/>
        <result property="vSexo" column="V_SEXO"/>
        <result property="iCodigoPostal" column="I_CODIGO_POSTAL"/>
        <result property="dFechaNacimiento" column="D_FECHA_NACIMIENTO"/>
        <result property="iAutoId" column="I_AUTO_ID"/>
        <result property="iModeloId" column="I_MODELO_ID"/>
        <result property="iAutoDescripcionId" column="I_AUTO_DESCRIPCION_ID"/>
        <result property="dFechaCreacion" column="D_FECHA_CREACION"/>
        <result property="iUsuarioCreacion" column="I_USUARIO_CREACION"/>
    </resultMap>

    <!-- Lista todos los resultados de consulta -->
    <select id="listarResultadoConsulta" resultMap="ResultadoConsultaResultado">
        SELECT
            I_RESULT_CARGA_ID,
            V_NOMBRE,
            V_SEXO,
            I_CODIGO_POSTAL,
            D_FECHA_NACIMIENTO,
            I_AUTO_ID,
            I_MODELO_ID,
            I_AUTO_DESCRIPCION_ID,
            D_FECHA_CREACION,
            I_USUARIO_CREACION
        FROM T_RESULTADO_CONSULTA
    </select>

    <!-- Elimina un resultado de consulta por ID -->
    <delete id="eliminarResultadoConsulta">
        DELETE FROM T_RESULTADO_CONSULTA
        WHERE I_RESULT_CARGA_ID = #{iResultCargaId}
    </delete>

</mapper>
