<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qualitas.portal.fraudes.account.dao.DUADao">

    <!-- Insertar un nuevo DUA -->
    <insert id="crearDUA" useGeneratedKeys="true" keyProperty="iDUAId">
        INSERT INTO T_DUA (V_DESCRIPCION, V_NARRACION, I_SINIESTRO_ID)
        VALUES (#{vDescripcion}, #{vNarracion}, #{iSiniestroID})
    </insert>

    <!-- Actualizar un DUA existente -->
    <update id="actualizarDUA" parameterType="com.qualitas.portal.fraudes.account.model.DUA">
        UPDATE T_DUA
        SET V_DESCRIPCION = #{vDescripcion},
            V_NARRACION = #{vNarracion},
            I_SINIESTRO_ID = #{iSiniestroID}
        WHERE I_DUA_ID = #{iDUAId}
    </update>

    <!-- Seleccionar un DUA por su ID utilizando resultMap -->
    <select id="obtenerDUA" resultMap="DUAResultado">
        SELECT * FROM T_DUA
        WHERE I_DUA_ID = #{id}
    </select>

    <!-- DefiniciÃ³n del resultMap para DUA -->
    <resultMap id="DUAResultado" type="com.qualitas.portal.fraudes.account.model.DUA">
        <id property="iDUAId" column="I_DUA_ID"/>
        <result property="vDescripcion" column="V_DESCRIPCION"/>
        <result property="vNarracion" column="V_NARRACION"/>
        <result property="iSiniestroID" column="I_SINIESTRO_ID"/>
    </resultMap>

    <!-- Listar todos los DUA utilizando resultMap -->
    <select id="listarDUA" resultMap="DUAResultado">
        SELECT I_DUA_ID, V_DESCRIPCION, V_NARRACION, I_SINIESTRO_ID
        FROM T_DUA
    </select>

    <!-- Eliminar un DUA por su ID -->
    <delete id="eliminarDUA" parameterType="java.math.BigDecimal">
        DELETE FROM T_DUA WHERE I_DUA_ID = #{id}
    </delete>

</mapper>
